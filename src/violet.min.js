var Violet={Util:{}};Violet.Util.uri_encode=function(b){return encodeURIComponent(b).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")};Violet.Util.mergeHash=function(){var b=arguments.length,a,e,c={};for(a=0;a<b;a++){var d=arguments[a];for(e in d)d.hasOwnProperty(e)&&(c[e]=d[e])}return c};
Violet.HTTPClient=function Class(a){if(!(this instanceof Class))return new Class(a);a||(a={});this.method=a.method||"GET";this.uri=a.uri||"";this.post_data={};this.authorization_header=null;this.onloading=function(){};this.onsuccess=function(){};this.onerror=function(){};this.request=new XMLHttpRequest({mozSystem:!0})};
(function(){var b=Violet.HTTPClient.prototype;b.start=function(){var a=this.request;a.open(this.method,this.uri,!0);null!==this.authorization_header&&a.setRequestHeader("Authorization",this.authorization_header);"POST"===this.method&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a.onreadystatechange=function(){if(3===a.readyState)this.onloading(a);else if(4===a.readyState)if(200===a.status)this.onsuccess(a);else this.onerror(a)}.bind(this);a.send(this.postBody())};b.stop=
function(){this.request.abort()};b.setOAuthHeader=function(a){var e="",c=[];for(e in a)a.hasOwnProperty(e)&&(c[c.length]=e+'="'+a[e]+'"');this.authorization_header="OAuth "+c.join(", ")};b.postBody=function(){if("GET"===this.method||0===this.post_data.length)return null;var a="",e=this.post_data,c=[];for(a in e)e.hasOwnProperty(a)&&c.push(a+"="+Violet.Util.uri_encode(e[a]));return c.join("&")}})();
Violet.OAuth=function Class(a){if(!(this instanceof Class))return new Class(a);a||(a={});this.base_uri=a.uri;this.consumer_key=a.consumer_key;this.consumer_secret=a.consumer_secret;this.access_token=a.access_token;this.access_token_secret=a.access_token_secret;this.oauth_token_secret=this.oauth_token=""};
(function(){var b=Violet.OAuth.prototype;b.obtainAuthorizeURI=function(a,e){var c=Violet.HTTPClient({uri:"https://api.twitter.com/oauth/request_token",method:"POST"}),d={oauth_callback:"oob",oauth_consumer_key:this.consumer_key,oauth_nonce:this.generateNonce(32),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:String(Math.floor(new Date/1E3)),oauth_version:"1.0"};d.oauth_signature=this.generateSignature("POST","https://api.twitter.com/oauth/request_token",d,"");c.setOAuthHeader(d);c.onsuccess=function(c){c=
c.responseText.split("&");var e,d=c.length,b={};for(e=0;e<d;e++){var h=c[e].split("=");b[h[0]]=h[1]}this.oauth_token=b.oauth_token;this.oauth_token_secret=b.oauth_token_secret;a("https://api.twitter.com/oauth/authorize?oauth_token="+b.oauth_token)}.bind(this);c.onerror=e;c.start()};b.obtainAccessToken=function(a,e,c){var d=Violet.HTTPClient({uri:"https://api.twitter.com/oauth/access_token",method:"POST"});a={oauth_consumer_key:this.consumer_key,oauth_nonce:this.generateNonce(32),oauth_signature_method:"HMAC-SHA1",
oauth_timestamp:String(Math.floor(new Date/1E3)),oauth_token:this.oauth_token,oauth_verifier:a,oauth_version:"1.0"};a.oauth_signature=this.generateSignature("POST","https://api.twitter.com/oauth/access_token",a,this.oauth_token_secret);d.setOAuthHeader(a);d.onsuccess=function(a){a=a.responseText.split("&");var c,d=a.length,b={};for(c=0;c<d;c++){var h=a[c].split("=");b[h[0]]=h[1]}this.access_token=b.access_token;this.access_token_secret=b.access_token_secret;e(b)}.bind(this);d.onerror=c;d.start()};
b.obtainOAuthParams=function(a,b,c){var d={oauth_consumer_key:this.consumer_key,oauth_nonce:this.generateNonce(32),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:String(Math.floor(new Date/1E3)),oauth_token:this.access_token,oauth_version:"1.0"};d.oauth_signature=this.generateSignature(a,b,Violet.Util.mergeHash(d,c),this.access_token_secret);return d};b.generateNonce=function(a){var b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split(""),c,d="";for(c=0;c<a;c++)d+=b[Math.floor(61*
Math.random())];return d};b.generateSignature=function(a,b,c,d){var f=[],g,k;a=a.toUpperCase()+"&"+Violet.Util.uri_encode(b)+"&";for(g in c)c.hasOwnProperty(g)&&(f[f.length]=g);f.sort();b=f.length;k=[];for(g=0;g<b;g++)k[k.length]=f[g]+"="+Violet.Util.uri_encode(c[f[g]]);a+=Violet.Util.uri_encode(k.join("&"));d||(d="");c=new jsSHA(a,"TEXT");return Violet.Util.uri_encode(c.getHMAC(this.consumer_secret+"&"+d,"TEXT","SHA-1","B64"))}})();Violet.Endpoints={};Violet.Endpoints.get="statuses/mentions_timeline;statuses/user_timeline;statuses/home_timeline;statuses/retweets_of_me;statuses/retweets/:id;statuses/show/:id;statuses/oembed;statuses/retweeters/ids;search/tweets;statuses/sample;statuses/firehose;user;site;direct_messages;direct_messages/sent;direct_messages/show;friendships/no_retweets/ids;friends/ids;followers/ids;friendships/lookup;friendships/incoming;friendships/outgoing;friendships/show;friends/list;followers/list;account/settings;account/verify_credentials;blocks/list;blocks/ids;users/lookup;users/show;users/search;users/contributees;users/contributors;users/profile_banner;users/suggestions/:slug;users/suggestions;users/suggestions/:slug/members;favorites/list;lists/list;lists/statuses;lists/memberships  ;lists/subscribers;lists/subscribers/show;lists/members/show;lists/members;lists/show;lists/subscriptions;lists/ownerships;saved_searches/list;saved_searches/show/:id;geo/id/:place_id;geo/reverse_geocode;geo/searc;geo/similar_places;trends/place;trends/available;trends/closest;oauth/authenticate;oauth/authorize  ;help/configuration;help/languages;help/privacy;help/tos;application/rate_limit_status".split(";");
Violet.Endpoints.post="statuses/destroy/:id statuses/update statuses/retweet/:id statuses/update_with_media statuses/filter direct_messages/destroy direct_messages/new friendships/create friendships/destroy friendships/update account/settings account/update_delivery_device account/update_profile_background_image account/update_profile_colors account/update_profile_image blocks/create blocks/destroy account/remove_profile_banner account/update_profile_banner favorites/destroy favorites/create lists/members/destroy lists/subscribers/create lists/subscribers/destroy lists/members/create_all lists/members/create lists/destroy lists/update lists/create lists/members/destroy_all saved_searches/create saved_searches/destroy/:id geo/place users/report_spam oauth/access_token oauth/request_token oauth2/token oauth2/invalidate_token".split(" ");
Violet.Endpoints.method=function(b){var a=null;-1!==Violet.Endpoints.get.indexOf(b)?a="GET":-1!==Violet.Endpoints.post.indexOf(b)&&(a="POST");return a};Violet.Request=function(b,a,e,c){var d=Violet.Endpoints.method(b);b=this.base_uri+b+".json";var f=Violet.HTTPClient({method:d,uri:b});f.setOAuthHeader(this.oauth.obtainOAuthParams(d,b,a));f.onsuccess=e;f.onerror=c;f.post_data=a;f.start()};
Violet.init=function Class(a){if(!(this instanceof Class))return new Class(a);this.base_uri="https://api.twitter.com/1.1/";this.consumer_key=a.consumer_key;this.consumer_secret=a.consumer_secret;this.access_token=a.access_token||"";this.access_token_secret=a.access_token_secret||"";this.initialize()};
(function(){Violet.init.prototype.initialize=function(){this.oauth=Violet.OAuth({consumer_key:consumer_key,consumer_secret:consumer_secret,access_token:access_token,access_token_secret:access_token_secret});this.request=Violet.Request.bind(this)}})();
