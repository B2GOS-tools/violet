var Violet={Util:{}};Violet.Util.uri_encode=function(c){return encodeURIComponent(c).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")};Violet.Util.mergeHash=function(){var c=arguments.length,a,d,b={};for(a=0;a<c;a++){var e=arguments[a];for(d in e)e.hasOwnProperty(d)&&(b[d]=e[d])}return b};
Violet.HTTPClient=function Class(a){if(!(this instanceof Class))return new Class(a);a||(a={});this.method=a.method||"GET";this.uri=a.uri||"";this.post_data={};this.authorization_header=null;this.onloading=function(){};this.onsuccess=function(){};this.onerror=function(){};this.request=new XMLHttpRequest({mozSystem:!0})};
(function(){var c=Violet.HTTPClient.prototype;c.start=function(){var a=this.request;a.open(this.method,this.uri,!0);null!==this.authorization_header&&a.setRequestHeader("Authorization",this.authorization_header);"POST"===this.method&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a.onreadystatechange=function(){if(3===a.readyState)this.onloading(a);else if(4===a.readyState)if(200===a.status)this.onsuccess(a);else this.onerror(a)}.bind(this);a.send(this.postBody())};c.stop=
function(){this.request.abort()};c.setOAuthHeader=function(a){var d="",b=[];for(d in a)a.hasOwnProperty(d)&&(b[b.length]=d+'="'+a[d]+'"');this.authorization_header="OAuth "+b.join(", ")};c.postBody=function(){if("GET"===this.method||0===this.post_data.length)return null;var a="",d=this.post_data,b=[];for(a in d)d.hasOwnProperty(a)&&b.push(a+"="+Violet.Util.uri_encode(d[a]));return b.join("&")}})();
Violet.OAuth=function Class(a){if(!(this instanceof Class))return new Class(a);a||(a={});this.base_uri=a.uri;this.consumer_key=a.consumer_key;this.consumer_secret=a.consumer_secret;this.access_token=a.access_token;this.access_token_secret=a.access_token_secret;this.oauth_token_secret=this.oauth_token=""};
(function(){var c=Violet.OAuth.prototype;c.obtainAuthorizeURI=function(a,d){var b=Violet.HTTPClient({uri:"https://api.twitter.com/oauth/request_token",method:"POST"}),e={oauth_callback:"oob",oauth_consumer_key:this.consumer_key,oauth_nonce:this.generateNonce(32),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:String(Math.floor(new Date/1E3)),oauth_version:"1.0"};e.oauth_signature=this.generateSignature("POST","https://api.twitter.com/oauth/request_token",e,"");b.setOAuthHeader(e);b.onsuccess=function(b){b=
b.responseText.split("&");var d,e=b.length,c={};for(d=0;d<e;d++){var g=b[d].split("=");c[g[0]]=g[1]}this.oauth_token=c.oauth_token;this.oauth_token_secret=c.oauth_token_secret;a("https://api.twitter.com/oauth/authorize?oauth_token="+c.oauth_token)}.bind(this);b.onerror=d;b.start()};c.obtainAccessToken=function(a,d,b){var e=Violet.HTTPClient({uri:"https://api.twitter.com/oauth/access_token",method:"POST"});a={oauth_consumer_key:this.consumer_key,oauth_nonce:this.generateNonce(32),oauth_signature_method:"HMAC-SHA1",
oauth_timestamp:String(Math.floor(new Date/1E3)),oauth_token:this.oauth_token,oauth_verifier:a,oauth_version:"1.0"};a.oauth_signature=this.generateSignature("POST","https://api.twitter.com/oauth/access_token",a,this.oauth_token_secret);e.setOAuthHeader(a);e.onsuccess=function(a){a=a.responseText.split("&");var b,e=a.length,c={};for(b=0;b<e;b++){var g=a[b].split("=");c[g[0]]=g[1]}this.access_token=c.access_token;this.access_token_secret=c.access_token_secret;d(c)}.bind(this);e.onerror=b;e.start()};
c.obtainOAuthParams=function(a,d,b){var e={oauth_consumer_key:this.consumer_key,oauth_nonce:this.generateNonce(32),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:String(Math.floor(new Date/1E3)),oauth_token:this.access_token,oauth_version:"1.0"};e.oauth_signature=this.generateSignature(a,d,Violet.Util.mergeHash(e,b),this.access_token_secret);return e};c.generateNonce=function(a){var d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split(""),b,e="";for(b=0;b<a;b++)e+=d[Math.floor(61*
Math.random())];return e};c.generateSignature=function(a,d,b,e){var c=[],f,h;a=a.toUpperCase()+"&"+Violet.Util.uri_encode(d)+"&";for(f in b)b.hasOwnProperty(f)&&(c[c.length]=f);c.sort();d=c.length;h=[];for(f=0;f<d;f++)h[h.length]=c[f]+"="+Violet.Util.uri_encode(b[c[f]]);a+=Violet.Util.uri_encode(h.join("&"));e||(e="");b=new jsSHA(a,"TEXT");return Violet.Util.uri_encode(b.getHMAC(this.consumer_secret+"&"+e,"TEXT","SHA-1","B64"))}})();
Violet.init=function Class(a){if(!(this instanceof Class))return new Class(a);this.base_uri="https://api.twitter.com/1.1/";this.initialize(a)};(function(){Violet.init.prototype.initialize=function(c){}})();
